# PLEIAData: Отчёт об оборудовании для сбора данных

## Обзор проекта

**Датасет:** PLEIAData (Pleiades Building Dataset)
**Университет:** Universidad de Murcia, Испания
**Проект:** PHOENIX (European H2020 Project)
**Период сбора:** 1 января 2021 — 18 декабря 2021 (352 дня)
**Публикация:** Nature Scientific Data, 2023
**DOI:** https://doi.org/10.1038/s41597-023-02023-3
**Данные:** https://zenodo.org/records/7620136

---

## 1. Здание Pleiades

### Общая информация

| Параметр | Значение |
|----------|----------|
| Общая площадь | 10,983 м² |
| Количество блоков | 3 (A, B, C) |
| Тип здания | Университетский офисный центр |
| Местоположение | Мурсия, Испания |
| Координаты | 37.9922°N, -1.1307°E |
| Климат | Средиземноморский (жаркое лето, мягкая зима) |

### Структура блоков

| Блок | Площадь | Этажей | Помещений с датчиками |
|------|---------|--------|----------------------|
| **A** | 4,500 м² | 5 | 47 комнат |
| **B** | 2,500 м² | 2 | 18 комнат |
| **C** | 1,200 м² | 1 | 14 комнат |
| **Всего** | **8,200 м²** | **8** | **79 комнат** |

---

## 2. Инвентаризация сенсоров

### Общая статистика

| Тип сенсора | Количество | Блок A | Блок B | Блок C |
|-------------|------------|--------|--------|--------|
| **Температурные датчики** | 90 | 49 | 35 | 6 |
| **HVAC контроллеры** | 86 | 49 | 23 | 14 |
| **CO2 сенсоры** | 12 | 4 | 8 | 0 |
| **Датчики присутствия** | 12 | 4 | 8 | 0 |
| **Счётчики электроэнергии** | 3 | 1 | 1 | 1 |
| **Метеостанция** | 1 | — | — | — |
| **ИТОГО** | **204** | **107** | **75** | **21** |

---

## 3. Детальное описание оборудования

### 3.1 Температурные датчики (90 шт.)

**Тип:** Комнатные термостаты с интегрированными датчиками
**Измеряемые параметры:**
- V2 — средняя температура в помещении (°C)

**Характеристики (типовые для BMS):**
- Диапазон измерения: -10°C до +50°C
- Точность: ±0.5°C
- Разрешение: 0.1°C
- Протокол: Modbus RTU / BACnet MS/TP

**Распределение по комнатам:**

```
Блок A (49 датчиков в 40 комнатах):
  Комнаты: 34-44, 50, 52-55, 58-62, 64-65, 67-83

Блок B (35 датчиков в 17 комнатах):
  Комнаты: 2, 9-18, 84-87, 89-90

Блок C (6 датчиков в 4 комнатах):
  Комнаты: 29, 30, 32, 88
```

### 3.2 HVAC контроллеры (86 шт.)

**Тип:** VRV/VRF системы кондиционирования
**Вероятный производитель:** Daikin, Mitsubishi Electric или аналог

**Измеряемые параметры:**
| Переменная | Описание | Значения |
|------------|----------|----------|
| V4 | Состояние (количество активных блоков) | 0-19 |
| V12 | Уставка температуры | 14.1°C — 21.2°C |
| V26 | Режим работы | 0=выкл, 1=нагрев, 2=охлаждение |
| V5_0, V5_1, V5_2 | One-hot кодировка режима | 0/1 |

**Распределение:**
```
Блок A: 49 HVAC-блоков в 47 комнатах
Блок B: 23 HVAC-блока в 18 комнатах
Блок C: 14 HVAC-блоков в 14 комнатах
```

**Протоколы связи:**
- Daikin: D-III Net → BACnet/IP шлюз
- Mitsubishi: M-NET → Modbus TCP шлюз
- Интеграция через BMS

### 3.3 CO2 сенсоры (12 шт.)

**Тип:** NDIR (Non-Dispersive Infrared) датчики CO2
**Типовые модели для BMS:**
- Siemens QPA2002
- Honeywell C7232A
- Schneider SE7600

**Измеряемые параметры:**
| Переменная | Описание | Диапазон |
|------------|----------|----------|
| V17 | Концентрация CO2 | 400-2000+ ppm |

**Характеристики:**
- Диапазон: 0-2000 ppm (расширенный до 5000 ppm)
- Точность: ±50 ppm + 3% от измерения
- Время отклика: < 2 минуты
- Протокол: Modbus RTU, 0-10V аналог

**Распределение:**
```
Блок A: 4 датчика (комнаты 37, 38, 42, 43)
Блок B: 8 датчиков (комнаты 9, 10, 11, 12, 15, 16, 17, 18)
Блок C: 0 датчиков
```

### 3.4 Датчики присутствия (12 шт.)

**Тип:** PIR (Passive Infrared) детекторы движения
**Типовые модели:**
- Honeywell DT8035
- Bosch DS936

**Измеряемые параметры:**
- Бинарный сигнал присутствия (0/1)
- Используется для управления HVAC и освещением

**Распределение:**
```
Блок A: 4 датчика (комнаты 37, 38, 42, 43)
Блок B: 8 датчиков (комнаты 9, 10, 11, 12, 15, 16, 17, 18)
Блок C: 0 датчиков
```

### 3.5 Счётчики электроэнергии (3 шт.)

**Тип:** Многофункциональные анализаторы качества электроэнергии
**Типовые модели для BMS:**
- Schneider PM5110 / PM5350
- ABB M4M 30
- Siemens SENTRON PAC

**Измеряемые параметры:**
| Переменная | Описание | Единицы |
|------------|----------|---------|
| dif_cons_real | Дифференциальное потребление | кВт·ч |
| cons_total | Накопленное потребление | кВт·ч |
| dif_cons_smooth | Сглаженное потребление | кВт·ч |

**Характеристики:**
- Точность: Class 0.5S (IEC 62053-22)
- Измерение: 3-фазное, 4-проводное
- Протокол: Modbus TCP/RTU
- Интервал записи: 1 час

**Установка:**
```
Блок A: 1 счётчик на вводе
Блок B: 1 счётчик на вводе
Блок C: 1 счётчик на вводе
```

### 3.6 Метеостанция (1 шт.)

**Источник данных:** IMIDA (Instituto Murciano de Investigación y Desarrollo Agrario y Alimentario)
**Тип:** Профессиональная агрометеорологическая станция

**Измеряемые параметры:**
| Переменная | Описание | Единицы | Диапазон |
|------------|----------|---------|----------|
| tmed | Температура воздуха | °C | -1.8 — 45.8 |
| hrmed | Относительная влажность | % | 10 — 100 |
| radmed | Солнечная радиация | Вт/м² | 0 — 1200 |
| vvmed | Скорость ветра | м/с | 0 — 30 |
| dvmed | Направление ветра | ° | 0 — 360 |
| prec | Осадки | мм | 0 — 50 |
| dewpt | Точка росы | °C | — |
| dpv | Дефицит давления пара | кПа | — |

**Оборудование метеостанции (типовое):**
- Термогигрометр: Vaisala HMP155
- Пиранометр: Kipp & Zonen CMP6
- Анемометр: Young 05103
- Осадкомер: Texas Electronics TR-525

---

## 4. Архитектура системы сбора данных

### 4.1 Топология сети

```
┌─────────────────────────────────────────────────────────────────────┐
│                         ПОЛЕВОЙ УРОВЕНЬ                              │
├─────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐               │
│  │ Температурные│  │    HVAC      │  │    CO2       │               │
│  │   датчики    │  │ контроллеры  │  │   сенсоры    │               │
│  │    (90)      │  │    (86)      │  │    (12)      │               │
│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘               │
│         │                 │                 │                        │
│    Modbus RTU        D-III Net/         Modbus RTU                  │
│    BACnet MS/TP       M-NET             0-10V                       │
│         │                 │                 │                        │
│         └────────┬────────┴────────┬────────┘                       │
│                  │                 │                                 │
│  ┌──────────────┐│  ┌──────────────┐│  ┌──────────────┐             │
│  │   Счётчики   ││  │   Датчики    ││  │ Метеостанция │             │
│  │ электроэнерг.││  │  присутствия ││  │   (IMIDA)    │             │
│  │     (3)      ││  │    (12)      ││  │     (1)      │             │
│  └──────┬───────┘│  └──────┬───────┘│  └──────┬───────┘             │
│         │        │         │        │         │                      │
│    Modbus TCP    │    Zigbee/       │    Serial/                    │
│                  │    Modbus        │    Ethernet                   │
│                  │                  │                                │
└──────────────────┼──────────────────┼────────────────────────────────┘
                   │                  │
┌──────────────────┴──────────────────┴────────────────────────────────┐
│                      УРОВЕНЬ АВТОМАТИЗАЦИИ                           │
├─────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  ┌─────────────────────────────────────────────────────────────┐    │
│  │                    BMS КОНТРОЛЛЕРЫ                           │    │
│  │  ┌───────────┐  ┌───────────┐  ┌───────────┐                │    │
│  │  │  DDC #1   │  │  DDC #2   │  │  DDC #3   │                │    │
│  │  │ (Блок A)  │  │ (Блок B)  │  │ (Блок C)  │                │    │
│  │  └─────┬─────┘  └─────┬─────┘  └─────┬─────┘                │    │
│  │        └──────────────┼──────────────┘                      │    │
│  │                       │                                      │    │
│  │              BACnet/IP или Modbus TCP                       │    │
│  │                       │                                      │    │
│  └───────────────────────┼─────────────────────────────────────┘    │
│                          │                                           │
└──────────────────────────┼───────────────────────────────────────────┘
                           │
┌──────────────────────────┴───────────────────────────────────────────┐
│                       УРОВЕНЬ УПРАВЛЕНИЯ                             │
├─────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  ┌─────────────────────────────────────────────────────────────┐    │
│  │                     BMS СЕРВЕР                               │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐          │    │
│  │  │   SCADA     │  │    Data     │  │   Alarm     │          │    │
│  │  │  Interface  │  │  Historian  │  │  Manager    │          │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘          │    │
│  │                                                              │    │
│  │  Возможные платформы:                                       │    │
│  │  • Schneider EcoStruxure Building Operation                 │    │
│  │  • Siemens Desigo CC                                        │    │
│  │  • Honeywell Niagara Framework                              │    │
│  │  • Tridium Niagara 4                                        │    │
│  └─────────────────────────────────────────────────────────────┘    │
│                          │                                           │
│                    Ethernet/IP                                       │
│                          │                                           │
│  ┌─────────────────────────────────────────────────────────────┐    │
│  │                  БАЗА ДАННЫХ                                 │    │
│  │  • SQL Server / PostgreSQL (исторические данные)            │    │
│  │  • InfluxDB / TimescaleDB (временные ряды)                  │    │
│  │  • Экспорт в CSV каждые 10 мин / 1 час                      │    │
│  └─────────────────────────────────────────────────────────────┘    │
│                                                                      │
└─────────────────────────────────────────────────────────────────────┘
```

### 4.2 Протоколы связи

| Уровень | Протокол | Применение |
|---------|----------|------------|
| Полевой | Modbus RTU (RS-485) | Счётчики, датчики температуры |
| Полевой | BACnet MS/TP | Термостаты, VAV-боксы |
| Полевой | D-III Net / M-NET | HVAC VRV/VRF системы |
| Полевой | Zigbee / EnOcean | Беспроводные датчики |
| Автоматизация | Modbus TCP | DDC контроллеры |
| Автоматизация | BACnet/IP | BMS интеграция |
| Управление | OPC-UA / REST API | Интеграция с IT-системами |

### 4.3 Интервалы сбора данных

| Данные | Интервал | Файл |
|--------|----------|------|
| Детальные данные комнат | 10 минут | data-roomX-10T.csv |
| Потребление электроэнергии | 1 час | consX-60T.csv |
| HVAC агрегированные | 1 час | hvac-aggX-60T.csv |
| Температура (средняя) | 1 час | temp-sensorX-60T.csv |
| Погода | 1 час | data-weather-60T.csv |
| CO2 (сырые данные) | ~1 минута | data-CO2.csv |

---

## 5. Спецификация для воспроизведения системы

### 5.1 Минимальный набор оборудования

Для создания аналогичной системы мониторинга на **1 здание (1000 м², 20 комнат)**:

| Компонент | Количество | Примерная стоимость (USD) |
|-----------|------------|---------------------------|
| **Температурные датчики** (Modbus) | 20 | $50-100 × 20 = $1,000-2,000 |
| **CO2 сенсоры** (NDIR, Modbus) | 5 | $150-300 × 5 = $750-1,500 |
| **Датчики присутствия** (PIR) | 10 | $30-50 × 10 = $300-500 |
| **Счётчик электроэнергии** (3-фаз) | 1 | $200-500 |
| **Метеостанция** (базовая) | 1 | $300-800 |
| **Modbus/Ethernet шлюз** | 2 | $150 × 2 = $300 |
| **DDC контроллер** | 1 | $500-1,500 |
| **Сервер сбора данных** | 1 | $500-1,000 |
| **Кабели, монтаж** | — | $500-1,000 |
| **ИТОГО** | — | **$4,350-9,100** |

### 5.2 Рекомендуемые модели оборудования

#### Температурные датчики (бюджетные)
- **Sonoff TH Elite** (WiFi, ~$15) — для DIY проектов
- **Xiaomi Aqara** (Zigbee, ~$15) — для умного дома
- **Siemens QAA2012** (Modbus, ~$80) — промышленный

#### CO2 сенсоры
- **SenseAir S8** (UART, ~$30) — OEM модуль
- **MH-Z19C** (UART, ~$20) — бюджетный
- **Vaisala GMW90** (Modbus, ~$400) — профессиональный

#### Счётчики электроэнергии
- **Eastron SDM630** (Modbus, ~$80) — популярный 3-фазный
- **Schneider PM5110** (Modbus, ~$300) — профессиональный

#### Шлюзы и контроллеры
- **Raspberry Pi 4** + Modbus HAT (~$100) — DIY
- **WAGO 750** (PLC, ~$500) — промышленный
- **UniPi Neuron** (~$300) — полупрофессиональный

### 5.3 Программное обеспечение

| Компонент | Open Source | Коммерческий |
|-----------|-------------|--------------|
| **Сбор данных** | Node-RED, Telegraf | Ignition, Niagara |
| **База данных** | InfluxDB, TimescaleDB | OSIsoft PI |
| **Визуализация** | Grafana | Tableau, Power BI |
| **BMS** | OpenBMS, VOLTTRON | Schneider EBO, Siemens Desigo |

---

## 6. Как подключить к вашей системе

### 6.1 Вариант 1: CSV импорт (текущая реализация)

Система уже поддерживает загрузку CSV файлов через `PLEIADataLoader`:

```python
from app.services.pleiadata_loader import PLEIADataLoader

loader = PLEIADataLoader(Path("data/pleiadata"))
consumption = loader.load_consumption("A")
hvac = loader.load_hvac("A")
temperature = loader.load_temperature("A")
weather = loader.load_weather()
```

### 6.2 Вариант 2: Real-time интеграция (рекомендуется)

Для подключения реальных датчиков добавьте в `requirements.txt`:

```
pymodbus>=3.6.0      # Modbus RTU/TCP
bacpypes3>=0.0.80    # BACnet/IP
paho-mqtt>=2.0.0     # MQTT (IoT датчики)
influxdb-client>=1.40.0  # Time-series DB
```

### 6.3 Вариант 3: Интеграция через MQTT

Для IoT датчиков (Zigbee/WiFi) через MQTT брокер:

```
Датчики → Zigbee2MQTT/Tasmota → MQTT Broker → Backend API
```

---

## 7. Контрольный список для развёртывания

### Фаза 1: Планирование
- [ ] Определить количество и расположение датчиков
- [ ] Выбрать протоколы связи (Modbus/BACnet/MQTT)
- [ ] Спроектировать сетевую топологию
- [ ] Рассчитать бюджет

### Фаза 2: Закупка
- [ ] Температурные датчики
- [ ] CO2 сенсоры (опционально)
- [ ] Счётчики электроэнергии
- [ ] Шлюзы/контроллеры
- [ ] Кабели и расходники

### Фаза 3: Монтаж
- [ ] Установка датчиков
- [ ] Прокладка кабелей / настройка WiFi
- [ ] Подключение к шлюзам
- [ ] Настройка адресов Modbus/BACnet

### Фаза 4: Программирование
- [ ] Настройка DDC/PLC
- [ ] Конфигурация точек в BMS
- [ ] Настройка Data Historian
- [ ] Тестирование сбора данных

### Фаза 5: Интеграция
- [ ] Настройка экспорта в CSV или API
- [ ] Подключение к Digital Twin системе
- [ ] Калибровка датчиков
- [ ] Валидация данных

---

## 8. Ссылки и ресурсы

### Научная публикация
- **Статья:** [Nature Scientific Data](https://doi.org/10.1038/s41597-023-02023-3)
- **Данные:** [Zenodo Repository](https://zenodo.org/records/7620136)

### Проект PHOENIX
- **Сайт:** https://phoenix-h2020.eu/
- **Описание:** EU Horizon 2020 проект по энергоэффективности зданий

### Технические стандарты
- **BACnet:** ASHRAE 135-2020
- **Modbus:** Modbus.org specifications
- **ISO 16484:** Building automation and control systems

---

*Отчёт создан: декабрь 2025*
*Источник данных: PLEIAData, Universidad de Murcia*
